<RadzenColumn Size="12" SizeMD="8">
	<RadzenFormField Text="Nome Abilità" Variant="Variant.Outlined" class="w-100">
		<RadzenDropDown Data="@PerkFiltrate"
						AllowFiltering="true"
						FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
						@bind-Value="@PerkAttacco.Perk"
						TextProperty="@(nameof(Perk.Nome))"
						class="w-100" />
	</RadzenFormField>
</RadzenColumn>
<RadzenColumn Size="12" SizeMD="2">
	<RadzenFormField Text="Punteggio" Variant="Variant.Outlined" class="w-100">
		<RadzenNumeric @bind-Value="@PerkAttacco.Punteggio" class="w-100" />
	</RadzenFormField>
</RadzenColumn>
<RadzenColumn Size="12" SizeMD="2">
	<RadzenButton Icon="add" ButtonStyle="ButtonStyle.Primary" Click="x => InserisciAbilità()" class="w-100 h-100" />
</RadzenColumn>

@code {
	[Parameter] public List<Perk> PerkTotali { get; set; } = new List<Perk>(); 
	[Parameter] public EventCallback<AttaccoPerk> OnInserisciAbilità { get; set; }
	[Parameter] public bool Positivo { get; set; }

	AttaccoPerk PerkAttacco = new AttaccoPerk();
	List<Perk> PerkFiltrate = new List<Perk>();

	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (!PerkFiltrate.Any() && PerkTotali.Any())
		{
			PerkFiltrate = PerkTotali.Where(x => x.IsAbilità == Positivo).ToList();
			StateHasChanged();
		}
	}

	public void InserisciAbilità()
	{
		if (OnInserisciAbilità.HasDelegate)
		{
			OnInserisciAbilità.InvokeAsync(PerkAttacco);
			PerkAttacco = new AttaccoPerk();
		}
	}
}
