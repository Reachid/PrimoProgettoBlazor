<RadzenColumn Size="12" SizeMD="8">
	<RadzenFormField Text="Nome Abilità" Variant="Variant.Outlined" class="w-100">
		<RadzenDropDown Data="@AbilitàFiltrate"
						AllowFiltering ="true"
						FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
						@bind-Value="@abilitàPersonaggio.Abilità"
						TextProperty="@(nameof(Abilità.Nome))"
						class="w-100" />
	</RadzenFormField>
</RadzenColumn>
<RadzenColumn Size="12" SizeMD="2">
	<RadzenFormField Text="Punteggio" Variant="Variant.Outlined" class="w-100">
		<RadzenNumeric @bind-Value="@abilitàPersonaggio.Punteggio" class="w-100" />
	</RadzenFormField>
</RadzenColumn>
<RadzenColumn Size="12" SizeMD="2">
	<RadzenButton Icon="add" ButtonStyle="ButtonStyle.Primary" Click="x => InserisciAbilità()" class="w-100 h-100" />
</RadzenColumn>

@code {
	[Parameter] public List<Abilità> AbilitàTotali { get; set; }
	[Parameter] public EventCallback<AbilitàPersonaggio> OnInserisciAbilità { get; set; }
	[Parameter] public bool Positivo { get; set; }

	AbilitàPersonaggio abilitàPersonaggio = new AbilitàPersonaggio();
	List<Abilità> AbilitàFiltrate = new List<Abilità>();

	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (!AbilitàFiltrate.Any() && AbilitàTotali.Any())
		{
			AbilitàFiltrate = AbilitàTotali.Where(x => x.IsAbilità == Positivo).ToList();
			StateHasChanged();
		}
	}

	public void InserisciAbilità()
	{
		if (OnInserisciAbilità.HasDelegate)
		{
			OnInserisciAbilità.InvokeAsync(abilitàPersonaggio);
			abilitàPersonaggio = new AbilitàPersonaggio();
		}
	}
}
